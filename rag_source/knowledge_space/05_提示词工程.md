# 提示词工程指南

## 什么是提示词工程

提示词工程（Prompt Engineering）是通过设计和优化输入提示词，引导大语言模型生成期望输出的技术。在RAG系统中，提示词工程直接影响答案质量和准确性。

## 提示词的重要性

### 为什么提示词重要

1. **影响输出质量**：好的提示词能显著提升答案质量
2. **控制输出格式**：可以指定输出格式和结构
3. **减少幻觉**：明确要求基于检索信息回答
4. **提高准确性**：通过指令引导模型正确理解任务

### RAG中的提示词

RAG系统的提示词通常包含：
- **系统角色**：定义AI助手的身份和职责
- **参考信息**：检索到的文档片段
- **用户问题**：用户的实际问题
- **回答要求**：格式、长度、风格等要求

## 提示词设计原则

### 1. 明确性（Clarity）

提示词应该清晰明确，避免歧义：

**不好的示例：**
```
回答问题
```

**好的示例：**
```
基于以下参考信息，用简洁明了的语言回答用户问题。
如果参考信息中没有相关内容，请明确说明无法回答。
```

### 2. 结构化（Structure）

使用结构化的格式，便于模型理解：

```
## 角色
你是专业的AI助手，由凡梦文化创建。

## 参考信息
[检索到的文档内容]

## 用户问题
[用户的问题]

## 回答要求
1. 基于参考信息回答
2. 如果信息不足，说明原因
3. 使用简洁明了的语言
4. 必要时提供示例

## 回答
```

### 3. 上下文丰富（Context-Rich）

提供足够的上下文信息：

```
你是行业助手，专门回答[领域]相关问题。
你的知识来源于[知识库名称]。
你的回答应该专业、准确、有价值。
```

### 4. 示例引导（Few-Shot Learning）

提供示例帮助模型理解期望的输出：

```
## 示例

问题：什么是RAG？
回答：RAG是检索增强生成技术，通过结合信息检索和文本生成来回答问题。

问题：[用户问题]
回答：
```

### 5. 约束明确（Constraints）

明确说明限制和要求：

```
回答要求：
- 不超过200字
- 使用中文回答
- 基于参考信息，不要编造
- 如果信息不足，说明原因
```

## RAG提示词模板

### 基础模板

```
你是AI助手，基于以下参考信息回答问题。

参考信息：
{context}

问题：{question}

回答：
```

### 增强模板

```
## 角色
你是专业的[领域]AI助手，由凡梦文化创建。

## 参考信息
以下是检索到的相关信息：
---------------------
{context}
---------------------

## 用户问题
{question}

## 回答要求
1. 基于参考信息回答，不要编造信息
2. 如果参考信息中没有相关内容，明确说明
3. 使用简洁明了的语言
4. 必要时提供具体示例
5. 保持专业和客观

## 回答
```

### 带思考过程的模板

```
## 角色
你是专业的AI助手。

## 参考信息
{context}

## 用户问题
{question}

## 思考过程要求
在回答之前，请先展示你的思考过程：
1. 如何理解用户的问题
2. 如何从参考信息中提取关键信息
3. 如何组织答案的逻辑结构

请按以下格式输出：

**思考过程：**
[你的思考过程]

**回答：**
[你的最终回答]
```

## 提示词优化技巧

### 1. 角色设定

明确AI的角色和职责：
```
你是专业的[领域]顾问，拥有[年限]年经验。
你的职责是帮助用户解决[具体问题]。
```

### 2. 任务分解

将复杂任务分解为步骤：
```
请按以下步骤回答：
1. 首先理解问题的核心
2. 从参考信息中提取相关信息
3. 组织答案结构
4. 生成最终回答
```

### 3. 输出格式

指定输出格式：
```
请按以下格式回答：

**核心答案：**
[简要答案]

**详细说明：**
[详细解释]

**相关建议：**
[建议]
```

### 4. 错误处理

处理边界情况：
```
如果参考信息中没有相关内容：
- 明确说明无法回答
- 建议用户提供更多信息
- 或建议查询其他资源
```

### 5. 质量控制

添加质量检查：
```
回答后，请检查：
- 是否基于参考信息
- 是否回答了用户问题
- 是否有逻辑错误
- 是否清晰易懂
```

## 常见问题

### Q: 提示词太长会影响效果吗？

A: 不一定。关键是要有结构，避免冗余。通常500-1000 tokens的提示词效果较好。

### Q: 如何测试提示词效果？

A: 
1. 准备测试问题集
2. 使用不同提示词测试
3. 评估答案质量
4. 选择最佳提示词

### Q: 提示词需要经常更新吗？

A: 
- 根据用户反馈调整
- 根据领域特点优化
- 定期评估和更新

### Q: 如何减少幻觉？

A: 
1. 明确要求基于参考信息
2. 添加"不知道"的选项
3. 要求提供来源
4. 使用更好的模型

## 最佳实践

1. **迭代优化**：不断测试和改进提示词
2. **领域定制**：根据应用领域定制提示词
3. **用户反馈**：根据用户反馈调整
4. **A/B测试**：对比不同提示词的效果
5. **文档化**：记录提示词版本和效果

## 工具推荐

- **LangChain Prompt Templates**：提示词模板库
- **PromptPerfect**：提示词优化工具
- **OpenAI Playground**：测试提示词效果
- **Prompt Engineering Guide**：提示词工程指南

