# AI RAG Pro 系统使用指南

## 快速开始

### 1. 环境准备

确保已安装所有依赖：
```bash
pip install -r requirements.txt
```

### 2. 配置API密钥

在 `config/config.json` 中配置您的API密钥：
- DeepSeek API Key（推荐）
- DashScope API Key（用于嵌入模型）
- OpenAI API Key（可选）

### 3. 启动系统

```bash
streamlit run 首页.py
```

## 功能模块

### 问答系统

#### 通用助手模式

通用助手不依赖知识库，直接使用大语言模型回答问题。适用于：
- 一般性问答
- 创意写作
- 代码生成
- 翻译等任务

**使用步骤：**
1. 选择"通用助手"模式
2. 在输入框中输入问题
3. 点击发送或按Enter键
4. 查看AI回答

#### 行业助手模式

行业助手基于知识库回答问题，适用于：
- 专业知识问答
- 文档查询
- 技术问题解答

**使用步骤：**
1. 选择"行业助手"模式
2. 调整检索参数（可选）：
   - 知识空间检索数量（k_knowledge）
   - 意图空间检索数量（k_intent）
   - 意图相似度阈值（intent_threshold）
3. 输入问题
4. 查看基于知识库的回答

**参数说明：**
- **k_knowledge**：从知识空间检索的文档数量，建议3-5
- **k_intent**：从意图空间检索的问答对数量，建议1-2
- **intent_threshold**：意图相似度阈值，超过此值直接使用意图空间的答案

### 意图空间管理

意图空间用于存储高质量的问答对，提供快速响应。

#### 查看意图空间内容

1. 进入"意图空间"页面
2. 查看所有问答对
3. 使用搜索功能查找特定内容
4. 查看高频问题和优质问答对

#### 添加问答对

在 `rag_source/intent_space/` 目录下创建或编辑TXT文件，格式如下：

```
Q: 什么是RAG？
A: RAG是检索增强生成技术，通过结合信息检索和文本生成来回答问题。

Q: 如何使用行业助手？
A: 选择"行业助手"模式，输入问题即可获得基于知识库的回答。
```

### 反馈空间

反馈空间收集用户反馈，用于系统优化。

#### 查看反馈

1. 进入"反馈空间"页面
2. 使用筛选条件查看特定反馈
3. 查看统计信息
4. 导出反馈数据

#### 提交反馈

在问答系统中：
1. 查看AI回答后，滚动到反馈区域
2. 选择评分（0-5星）
3. 选择问题类型（可选）
4. 填写改进建议（可选）
5. 点击"提交反馈"

## 知识库管理

### 添加知识文档

1. 将文档放入 `rag_source/knowledge_space/` 目录
2. 支持格式：TXT、MD、PDF等
3. 系统会自动索引新文档

### 更新知识库

系统支持增量更新：
- 添加新文档后，系统会自动检测并索引
- 修改文档后，需要重新索引

### 文档格式建议

- 使用清晰的标题和段落结构
- 保持文档的语义完整性
- 添加必要的元数据（如来源、时间等）

## 高级功能

### 思考过程显示

启用"显示思考过程"选项，可以查看AI的推理过程：
1. 在问答系统中勾选"💭 显示思考过程"
2. 提问后，查看思考过程和最终答案
3. 思考过程默认折叠，可点击展开

### 流式输出

系统默认启用流式输出，答案会逐字显示，提供更好的交互体验。

### 缓存管理

系统使用缓存优化性能：
- 数据缓存：3-5秒自动更新
- 资源缓存：RAG管理器缓存
- 手动刷新：点击"刷新数据"按钮

## 常见问题

### Q: 为什么行业助手没有返回答案？

A: 可能的原因：
1. 知识库中没有相关内容
2. API密钥未配置或无效
3. 嵌入模型未正确初始化
4. 检查系统日志查看详细错误

### Q: 如何提高答案质量？

A: 建议：
1. 优化知识库文档质量
2. 调整检索参数（增加k_knowledge）
3. 在意图空间中添加常见问题
4. 优化提示词

### Q: 如何更新知识库？

A: 
1. 添加新文档到knowledge_space目录
2. 系统会自动检测并索引
3. 或手动触发重新索引

### Q: 反馈数据存储在哪里？

A: 反馈数据存储在 `data/feedback.db` SQLite数据库中。

## 最佳实践

1. **知识库组织**：按主题分类组织文档
2. **问答对管理**：定期更新意图空间的问答对
3. **反馈分析**：定期查看反馈空间，识别改进点
4. **参数调优**：根据实际效果调整检索参数
5. **提示词优化**：根据领域特点优化提示词

## 技术支持

如遇到问题，请：
1. 查看系统日志
2. 检查配置文件
3. 查看错误提示
4. 联系技术支持

